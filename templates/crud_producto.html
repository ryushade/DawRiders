<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport"
		content="width=device-width, initial-scale=1, shrink-to-fit=no, minimum-scale=1, maximum-scale=1">
	<title>CicloRiders CRUD</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<!----css3---->
	<link rel="stylesheet" href="/static/css/custom.css">


	<!--google fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">


	<!--google material icon-->
	<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

</head>

<body>



	<div class="wrapper">

		<div class="body-overlay"></div>

		<!-------sidebar--design------------>

		<div id="sidebar">
			<div class="sidebar-header">
				<h3>
					<a href="{{ url_for('formulario_principal') }}">
						<img src="/static/img/logocicloriders_2-removebg-preview 1.png" class="img-fluid" />
						<span>CicloRiders</span>
					</a>
				</h3>
			</div>
			<ul class="list-unstyled component m-0">
				<li class="dropdown">
					<a href="#dashboardSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
						<i class="material-icons">dashboard</i>CRUD-Tablas
					</a>
					<ul class="collapse list-unstyled menu" id="dashboardSubmenu" style="margin-left: 20px;">
						<li><a href="{{ url_for('crud_producto') }}">Producto</a></li>
						<li><a href="{{url_for('crud_cliente')}}">Cliente</a></li>
						<li><a href="{{url_for('crud_accesorio')}}">Accesorios</a></li>

					</ul>
				</li>

			</ul>
		</div>

		<!-------sidebar--design- close----------->



		<!-------page-content start----------->

		<div id="content">

			<!------top-navbar-start----------->

			<div class="top-navbar">
				<div class="xd-topbar">
					<div class="row">
						<div class="col-2 col-md-1 col-lg-1 order-2 order-md-1 align-self-center">
							<div class="xp-menubar">
								<span class="material-icons text-white">signal_cellular_alt</span>
							</div>
						</div>

						<div class="col-md-5 col-lg-3 order-3 order-md-2">
							<div class="xp-searchbar">
								<form>
									<div class="input-group">
										<input type="search" class="form-control" placeholder="Buscar">
										<div class="input-group-append">
										</div>
									</div>
								</form>
							</div>
						</div>


						<div class="col-10 col-md-6 col-lg-8 order-1 order-md-3">
							<div class="xp-profilebar text-right">
								<nav class="navbar p-0">
									<ul class="nav navbar-nav flex-row ml-auto">
										<li class="dropdown nav-item active">
											<a class="nav-link" href="#" data-toggle="dropdown">
												<span class="material-icons">notifications</span>
											</a>

										</li>

										<li class="nav-item">
											<a class="nav-link" href="#">
												<span class="material-icons">question_answer</span>
											</a>
										</li>

										<li class="dropdown nav-item">
											<a class="nav-link" href="#" data-toggle="dropdown">
												<img src="/static/img/2.webp" style="width:40px; border-radius:50%;" />
												<span class="xp-user-live"></span>
											</a>
											<ul class="dropdown-menu small-menu">
												<li><a href="{{ url_for('formulario_principal') }}">
														<span class="material-icons">person_outline</span>
														Inicio
													</a></li>
												<li><a href="#">
														<span class="material-icons">settings</span>
														Configuración
													</a></li>
												<li><a href="{{ url_for('logout') }}">
														<span class="material-icons">logout</span>
														Cerrar Sesión
													</a></li>
											</ul>
										</li>



									</ul>
								</nav>
							</div>
						</div>

					</div>

					<div class="xp-breadcrumbbar text-center">
						<h4 class="page-title">Dashboard</h4>
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="#">CicloRiders</a></li>
							<li class="breadcrumb-item active" aria-curent="page">Dashboard</li>
						</ol>
					</div>


				</div>
			</div>
			<!------top-navbar-end----------->


			<!------main-content-start----------->

			<div class="main-content">
				<div class="row">
					<div class="col-md-12">
						<div class="table-wrapper">

							<div class="table-title">
								<div class="row">
									<div class="col-sm-6 p-0 flex justify-content-lg-start justify-content-center">
										<h2 class="ml-lg-2">Tabla Producto-Moto</h2>
									</div>
									<div class="col-sm-6 p-0 flex justify-content-lg-end justify-content-center">
										<a href="#addProductModal" class="btn btn-success" data-toggle="modal">
											<i class="material-icons">&#xE147;</i>
											<span>Agregar Producto</span>
										</a>

									</div>
								</div>
							</div>

							<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title">Confirmar Registro</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											¿Estás seguro que deseas registrar este producto?
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-dismiss="modal">Cancelar</button>
											<!-- Botón que realmente envía el formulario -->
											<button type="button" class="btn btn-primary"
												onclick="document.getElementById('addProductForm').submit();">Confirmar</button>
										</div>
									</div>
								</div>
							</div>
							<div class="modal fade" id="addProductModal" tabindex="-1" role="dialog">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<form id="addProductForm" method="post" action="{{ url_for('guardar_moto') }}"
											enctype="multipart/form-data">
											<div class="modal-header">
												<h5 class="modal-title">Agregar Producto-Moto</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												<!-- Motorcycle Code -->
												<div class="form-group">
													<label for="codmoto">Código de Moto</label>
													<input type="text" class="form-control" id="codmoto" name="codmoto"
														placeholder="Codigo de Moto" required>
												</div>
												<!-- Motorcycle Type -->
												<div class="form-group">
													<label for="tipo">Tipo de Moto</label>
													<input type="text" class="form-control" id="tipo" name="tipo"
														placeholder="Tipo" required>
												</div>
												<!-- Position -->
												<div class="form-group">
													<label for="posicionManejo">Posición de Manejo</label>
													<input type="text" class="form-control" id="posicionManejo"
														name="posicionManejo" placeholder="Posición de Manejo" required>
												</div>
												<!-- Number of Seats -->
												<div class="form-group">
													<label for="numAsientos">Número de Asientos</label>
													<input type="number" class="form-control" id="numAsientos"
														name="numAsientos" placeholder="Número de Asientos" required>
												</div>
												<!-- Number of Passengers -->
												<div class="form-group">
													<label for="numPasajeros">Número de Pasajeros</label>
													<input type="number" class="form-control" id="numPasajeros"
														name="numPasajeros" placeholder="Número de Pasajeros" required>
												</div>
												<!-- Dimensions (Length, Width, Height) -->
												<div class="form-group">
													<label for="largo">Largo</label>
													<input type="text" class="form-control" id="largo" name="largo"
														placeholder="Largo" required>
												</div>
												<div class="form-group">
													<label for="ancho">Ancho</label>
													<input type="text" class="form-control" id="ancho" name="ancho"
														placeholder="Ancho" required>
												</div>
												<div class="form-group">
													<label for="alto">Alto</label>
													<input type="text" class="form-control" id="alto" name="alto"
														placeholder="Alto" required>
												</div>
												<!-- Engine Type -->
												<div class="form-group">
													<label for="tipoMotor">Tipo de Motor</label>
													<input type="text" class="form-control" id="tipoMotor"
														name="tipoMotor" placeholder="Tipo Motor" required>
												</div>
												<!-- Fuel Type -->
												<div class="form-group">
													<label for="combustible">Combustible</label>
													<input type="text" class="form-control" id="combustible"
														name="combustible" placeholder="Combustible" required>
												</div>
												<!-- Number of Cylinders -->
												<div class="form-group">
													<label for="numCilindros">Número de Cilindros</label>
													<input type="number" class="form-control" id="numCilindros"
														name="numCilindros" placeholder="Número de Cilindros" required>
												</div>
												<!-- Tank Capacity -->
												<div class="form-group">
													<label for="capacidadTanque">Capacidad de Tanque</label>
													<input type="text" class="form-control" id="capacidadTanque"
														name="capacidadTanque" placeholder="Capacidad Tanque" required>
												</div>
												<!-- Performance -->
												<div class="form-group">
													<label for="rendimiento">Rendimiento</label>
													<input type="text" class="form-control" id="rendimiento"
														name="rendimiento" placeholder="Rendimiento" required>
												</div>
												<!-- Description -->
												<div class="form-group">
													<label for="descripcion">Descripción</label>
													<input type="text" class="form-control" id="descripcion"
														name="descripcion" placeholder="Descripcion" required>
												</div>
												<!-- Price -->
												<div class="form-group">
													<label for="precio">Precio</label>
													<input type="text" class="form-control" id="precio" name="precio"
														placeholder="Precio" required>
												</div>
												<!-- Stock -->
												<div class="form-group">
													<label for="stock">Stock</label>
													<input type="number" class="form-control" id="stock" name="stock"
														placeholder="Stock" required>
												</div>
												<!-- Brand -->
												<div class="form-group">
													<label for="marca">Marca</label>
													<input type="text" class="form-control" id="marca" name="marca"
														placeholder="Marca" required>
												</div>
												<!-- Model -->
												<div the="form-group">
													<label for="modelo">Modelo</label>
													<input type="text" class="form-control" id="modelo" name="modelo"
														placeholder="Modelo" required>
												</div>
												<!-- Color -->
												<div class="form-group">
													<label for="color">Color</label>
													<input type="text" class="form-control" id="color" name="color"
														placeholder="Color" required>
												</div>
												<!-- Image Upload -->
												<div class="form-group">
													<label for="uploadedFile">Imagen</label>
													<input type="file" class="form-control-file" id="uploadedFile"
														name="uploadedFile" required>
												</div>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"
													data-dismiss="modal">Cancelar</button>
												<button type="button" class="btn btn-primary" data-toggle="modal"
													data-target="#confirmModal">Registrar</button>
											</div>
										</form>
									</div>
								</div>

							</div>
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th>Cod Moto</th>
										<th>Descripcion</th>
										<th>Precio</th>
										<th>Stock</th>
										<th>Marca</th>
										<th>Modelo</th>
										<th>Color</th>
										<th>Imagen</th>
										<th>Tipo</th>
										<th>Posicion Manejo</th>
										<th>Num Asientos</th>
										<th>Num Pasajeros</th>
										<th>Largo</th>
										<th>Ancho</th>
										<th>Alto</th>
										<th>Tipo Motor</th>
										<th>Combustible</th>
										<th>Num Cilindros</th>
										<th>Capacidad Tanque</th>
										<th>Rendimiento</th>
										<th>Acciones</th>
									</tr>
								</thead>
								<tbody>
									{% for producto in productosm %}
									<tr class="{{ 'bg-danger' if producto[3] == 0 else '' }}">
										<td>{{producto[11]}}</td>
										<td>{{producto[1]}}</td>
										<td>{{producto[2]}}</td>
										<td>{{producto[3]}}</td>
										<td>{{producto[4]}}</td>
										<td>{{producto[5]}}</td>
										<td>{{producto[6]}}</td>
										<td>{{producto[7]}}</td>
										<td>{{producto[12]}}</td>
										<td>{{producto[13]}}</td>
										<td>{{producto[14]}}</td>
										<td>{{producto[15]}}</td>
										<td>{{producto[16]}}</td>
										<td>{{producto[17]}}</td>
										<td>{{producto[18]}}</td>
										<td>{{producto[19]}}</td>
										<td>{{producto[20]}}</td>
										<td>{{producto[21]}}</td>
										<td>{{producto[22]}}</td>
										<td>{{producto[23]}}</td>
										<td>

										<td>
											<a href="{{ url_for('editar_productoM', id=producto[0] )}}" class="edit"
												data-toggle="modal" data-target="#editEmployeeModal{{producto[0]}}">
												<i class="material-icons" data-toggle="tooltip"
													title="Edit">&#xE254;</i></a>
											<form action="{{ url_for('eliminar_productoM') }}" method="POST"
												onsubmit="return confirm('¿Seguro que desea eliminar esta moto?')"
												style="display: inline;">
												<input type="hidden" name="id" value="{{ producto[0] }}">
												<button type="submit" class="icon-button">
													<i class="material-icons" title="Delete">&#xE872;</i>
												</button>
											</form>




										</td>
										</td>
									</tr>


								</tbody>
								<div class="modal fade" id="editEmployeeModal{{ producto[0]}}" role="dialog">
									<div class="modal-dialog modal-lg">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title">Editar Producto</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<form method="post" action="{{url_for('actualizar_productoM')}}">
												<div class="modal-body">
													<input type="hidden" name="idProducto" value="{{producto[0]}}">

													<div class="row">
														<!-- Descripción, Marca, Modelo -->
														<div class="col-md-4">
															<div class="form-group">
																<label>Descripción</label>
																<input type="text" class="form-control"
																	value="{{producto[1]}}" name="descripcion" required>
															</div>
															<div class="form-group">
																<label>Marca</label>
																<input type="text" class="form-control"
																	value="{{producto[4]}}" name="marca" required>
															</div>
															<div class="form-group">
																<label>Modelo</label>
																<input type="text" class="form-control"
																	value="{{producto[5]}}" name="modelo" required>
															</div>
														</div>

														<!-- Precio, Stock, Color -->
														<div class="col-md-4">
															<div class="form-group">
																<label>Precio</label>
																<input type="number" step="0.01" class="form-control"
																	value="{{producto[2]}}" name="precio" required>
															</div>
															<div class="form-group">
																<label>Stock</label>
																<input type="number" class="form-control"
																	value="{{producto[3]}}" name="stock" required>
															</div>
															<div class="form-group">
																<label>Color</label>
																<input type="text" class="form-control"
																	value="{{producto[6]}}" name="color" required>
															</div>
														</div>

														<!-- Imagen y Codigo de Moto -->
														<div class="col-md-4">
															<div class="form-group">
																<label>Imagen</label>
																<input type="text" class="form-control"
																	value="{{producto[7]}}" name="imagen" readonly>
																<input type="file" class="form-control-file"
																	id="uploadedFile" name="uploadedFile">
															</div>
															<div class="form-group">
																<label>Codigo de Moto</label>
																<input type="text" class="form-control"
																	value="{{producto[11]}}" name="codmoto" readonly>
															</div>
														</div>
													</div>

													<!-- Tipo de Moto -->
													<div class="form-group">
														<label>Tipo de Moto</label>
														<input type="text" class="form-control" value="{{producto[12]}}"
															name="tipo">
													</div>

													<!-- Posición de Manejo -->
													<div class="form-group">
														<label>Posición de Manejo</label>
														<input type="text" class="form-control" value="{{producto[13]}}"
															name="posicionManejo">
													</div>

													<!-- Numero de Asientos -->
													<div class="form-group">
														<label>Numero de Asientos</label>
														<input type="number" class="form-control"
															value="{{producto[14]}}" name="numAsientos">
													</div>

													<!-- Numero de Pasajeros -->
													<div class="form-group">
														<label>Numero de Pasajeros</label>
														<input type="number" class="form-control"
															value="{{producto[15]}}" name="numPasajeros">
													</div>

													<!-- Largo -->
													<div class="form-group">
														<label>Largo</label>
														<input type="number" class="form-control"
															value="{{producto[16]}}" name="largo">
													</div>

													<!-- Ancho -->
													<div class="form-group">
														<label>Ancho</label>
														<input type="number" class="form-control"
															value="{{producto[17]}}" name="ancho">
													</div>

													<!-- Alto -->
													<div class="form-group">
														<label>Alto</label>
														<input type="number" class="form-control"
															value="{{producto[18]}}" name="alto">
													</div>

													<!-- Tipo de Motor -->
													<div class="form-group">
														<label>Tipo de Motor</label>
														<input type="text" class="form-control" value="{{producto[19]}}"
															name="tipoMotor">
													</div>

													<!-- Combustible -->
													<div class="form-group">
														<label>Combustible</label>
														<input type="text" class="form-control" value="{{producto[20]}}"
															name="combustible">

														<!-- Numero de Cilindros -->
														<div class="form-group">
															<label>Numero de Cilindros</label>
															<input type="number" class="form-control"
																value="{{producto[21]}}" name="numCilindros">

															<!-- Capacidad de Tanque -->
															<div class="form-group">
																<label>Capacidad de Tanque</label>
																<input type="number" class="form-control"
																	value="{{producto[22]}}" name="capacidadTanque">

																<!-- Rendimiento -->
																<div class="form-group">
																	<label>Rendimiento</label>
																	<input type="text" class="form-control"
																		value="{{producto[23]}}" name="rendimiento">
																</div>
																<div class="modal-footer">
																	<button type="button" class="btn btn-secondary"
																		data-dismiss="modal">Cancelar</button>
																	<button type="submit"
																		href="{{url_for('crud_producto')}}"
																		class="btn btn-primary">Guardar
																		Cambios</button>
																</div>
											</form>

										</div>

									</div>
								</div>
								{% endfor %}



							</table>
						</div>
					</div>
				</div>


				<div class="clearfix">
					<div class="hint-text">Mostrando <b>5</b> de<b>25</b></div>
					<ul class="pagination">
						<li class="page-item disabled"><a href="#">Anterior</a></li>
						<li class="page-item "><a href="#" class="page-link">1</a></li>
						<li class="page-item "><a href="#" class="page-link">2</a></li>
						<li class="page-item"><a href="#" class="page-link">3</a></li>
						<li class="page-item "><a href="#" class="page-link">4</a></li>
						<li class="page-item "><a href="#" class="page-link">5</a></li>
						<li class="page-item "><a href="#" class="page-link">Siguiente</a></li>
					</ul>
				</div>





			</div>
		</div>







	</div>
	</div>
	<footer class="footer">
		<div class="container-fluid">
			<div class="footer-in">
				<p class="mb-0">&copy 2024 CicloRiders. Todos los derechos reservados.</p>
			</div>
		</div>
	</footer>

	</div>
	</div>

	<script src="/static/js/jquery-3.3.1.slim.min.js"></script>
	<script src="/static/js/popper.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/jquery-3.3.1.min.js"></script>



	<script type="text/javascript">
		$(document).ready(function () {
			$(".xp-menubar").on('click', function () {
				$("#sidebar").toggleClass('active');
				$("#content").toggleClass('active');
			});

			$('#deleteConfirmationModal').on('show.bs.modal', function (event) {
				var button = $(event.relatedTarget) // Botón que activó el modal
				var productId = button.data('id') // Extraer información de atributos data-*
				var modal = $(this)
				modal.find('#delete-product-btn').data('id', productId)
			});

			$('#delete-product-btn').click(function () {
				var productId = $(this).data('id');
				console.log("Deleting Product ID:", productId); // Debugging
				$.post('/eliminar_productoM', { id: productId }, function (data) {
					$('#deleteConfirmationModal').modal('hide'); // Ocultar modal
					window.location.reload(); // Recarga la página para ver los cambios
				}).fail(function (response) {
					console.log("Failed to delete product:", response); // Error si falla
					alert("Error al eliminar el producto.");
				});
			});

		});
	</script>

	<script>
		$(document).ready(function() {
    $('#confirmModal').on('show.bs.modal', function () {
        // Cierra el modal de agregar producto cuando se abre el modal de confirmación
        $('#addProductModal').modal('hide');
    });

    $('#confirmModal').on('hidden.bs.modal', function () {
        // Opcionalmente, podrías volver a abrir el modal de agregar producto si se cancela la confirmación
        $('#addProductModal').modal('show');
    });
});

	</script>


</body>

</html>